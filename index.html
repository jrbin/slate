
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;http&quot;,&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="http">http</a>
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#notes_notes" class="toc-h1 toc-link" data-title="Notes">Notes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#notes_use-json" class="toc-h2 toc-link" data-title="Notes">Use JSON</a>
                  </li>
                  <li>
                    <a href="#notes_resource-location-uri" class="toc-h2 toc-link" data-title="Notes">Resource Location URI</a>
                  </li>
                  <li>
                    <a href="#notes_uri-style" class="toc-h2 toc-link" data-title="Notes">URI style</a>
                  </li>
                  <li>
                    <a href="#notes_use-put-or-patch" class="toc-h2 toc-link" data-title="Notes">Use PUT or PATCH</a>
                  </li>
                  <li>
                    <a href="#notes_authentication" class="toc-h2 toc-link" data-title="Notes">Authentication</a>
                  </li>
                  <li>
                    <a href="#notes_errors" class="toc-h2 toc-link" data-title="Notes">Errors</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#licenses_licenses" class="toc-h1 toc-link" data-title="Licenses">Licenses</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#licenses_attributes" class="toc-h2 toc-link" data-title="Licenses">Attributes</a>
                  </li>
                  <li>
                    <a href="#licenses_get-license" class="toc-h2 toc-link" data-title="Licenses">Get License</a>
                  </li>
                  <li>
                    <a href="#licenses_update-license" class="toc-h2 toc-link" data-title="Licenses">Update License</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#renewals_renewals" class="toc-h1 toc-link" data-title="Renewals">Renewals</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#renewals_attributes" class="toc-h2 toc-link" data-title="Renewals">Attributes</a>
                  </li>
                  <li>
                    <a href="#renewals_get-renewals" class="toc-h2 toc-link" data-title="Renewals">Get Renewals</a>
                  </li>
                  <li>
                    <a href="#renewals_get-one-renewal" class="toc-h2 toc-link" data-title="Renewals">Get one renewal</a>
                  </li>
                  <li>
                    <a href="#renewals_create-a-renewal-notice" class="toc-h2 toc-link" data-title="Renewals">Create a renewal notice</a>
                  </li>
                  <li>
                    <a href="#renewals_update-a-renewal-notice" class="toc-h2 toc-link" data-title="Renewals">Update a renewal notice</a>
                  </li>
                  <li>
                    <a href="#renewals_archive-a-renewal-notice" class="toc-h2 toc-link" data-title="Renewals">Archive a renewal notice</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#payments_payments" class="toc-h1 toc-link" data-title="Payments">Payments</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#payments_attributes" class="toc-h2 toc-link" data-title="Payments">Attributes</a>
                  </li>
                  <li>
                    <a href="#payments_get-a-payment" class="toc-h2 toc-link" data-title="Payments">Get a payment</a>
                  </li>
                  <li>
                    <a href="#payments_update-a-payment" class="toc-h2 toc-link" data-title="Payments">Update a payment</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#officers_officers" class="toc-h1 toc-link" data-title="Officers">Officers</a>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='notes_notes'>Notes</h1>
<p>REST API document for COMP9322 assignment 2.</p>

<aside class="warning">
When and who will create payment is modified according to Professor's suggestion, please see <a href="#payments_payments">payments section</a> and <a href="#renewals_create-a-renewal-notice">Create a renewal notice</a>
</aside>
<h2 id='notes_use-json'>Use JSON</h2>
<p>I prefer using json for REST APIs because json is natively supported in javascript, making it really convenient.</p>
<h2 id='notes_resource-location-uri'>Resource Location URI</h2><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://myhost.com/licenses/1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"driverName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nima Nishad"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Every object representation should contain a uri of its location.</p>

<p>For simplicity, the examples of resources representation below don&#39;t contain <code>http://myhost.com</code> part. But bear in mind that we should have this part in real application.</p>
<h2 id='notes_uri-style'>URI style</h2>
<aside class="notice">
Prefer shorter ones, like
</aside>

<ul>
<li><code>/licenses/1</code></li>
<li><code>/renewals/1</code></li>
<li><code>/payments/1</code></li>
</ul>

<aside class="warning">
Not preferred
</aside>

<ul>
<li><code>/licenses/1/renewals/1</code></li>
<li><code>/renewals/1/payments/1</code></li>
<li><code>/licenses/1/renewals/1/payments/1</code></li>
</ul>

<aside class="notice">
The following is the original discussion
</aside>

<p>For resources with relationship (e.g one-to-one, one-to-many), we have two types of URI style.</p>

<p>For example, licenses and renewal notices is a one-to-many relationship. Every renewal belongs to a license. So for renewal, we can use either one of the following URIs</p>

<ol>
<li><code>/licenses/&lt;licenseId&gt;/renewals/&lt;renewalId&gt;</code></li>
<li><code>/renewals/renewalId</code></li>
</ol>

<p>The first one has clearer semantic information. But it needs provide extra information (i.e. the license ID) every time we use the renewal notice (either creating, updating).</p>

<p>In the second one, we can represent the relationship inside the resource object, like</p>

<blockquote>
<p>Here is a renewal object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"license"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/licenses/1"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>But it&#39;s a little weird when creating a renewal notice using POST, because we need to provide the foreign key in the request body.</p>
<h2 id='notes_use-put-or-patch'>Use PUT or PATCH</h2>
<aside class="notice">
Use PUT
</aside>

<p>Theoretically prefer PUT because it&#39;s idempotent. However, when updating by PUT, server will ignore some values because either server generates the values automatically or server doesn&#39;t trust the values given by the client.</p>

<p>See <a href="#renewals_update-a-renewal-notice">Update a renewal notice</a> for example.</p>
<h2 id='notes_authentication'>Authentication</h2>
<blockquote>
<p>Drivers&#39; authorisation</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/licenses</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">token 03e8296d-566a-4405-bb03-bf4913794c90</span>
</code></pre>
<blockquote>
<p>Officers&#39; authorisation</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/licenses</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">token 22ecc9e1-fa98-4ea8-a50b-8a074046b02c</span>
</code></pre>
<aside class="notice">
Use <code>03e8296d-566a-4405-bb03-bf4913794c90</code> for drivers
</aside>

<aside class="notice">
Use <code>22ecc9e1-fa98-4ea8-a50b-8a074046b02c</code> for officers
</aside>

<p>As the professor said, the authorization and authentication will be much easier. All drivers will use the same token and all officers will use the another token. The two tokens are predefined and can be hardcoded.</p>
<h2 id='notes_errors'>Errors</h2>
<p>When a server error happens, the server should return an HTTP status other than <code>HTTP 200</code>. For simplicity, we are not trying to design a detailed error code system by ourselves on top of HTTP error codes. The following table list the HTTP status code the server should return in general cases.</p>

<table><thead>
<tr>
<th>HTTP status</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request has unexpected parameters.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your access token is wrong.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The requested resources could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a resource with an invalid method.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

<p>Note <code>50x</code> are runtime error, you should not return them yourself. Instead, you should let your program or server software (i.e. nginx) throw it.</p>
<h1 id='licenses_licenses'>Licenses</h1>
<p>Represent a drivers license.</p>

<p>Licenses already exist in database. So there is no need to create a new driver&#39;s license (HTTP POST). We also don&#39;t have the function to remove a driver&#39;s license (HTTP DELETE).</p>
<h2 id='licenses_attributes'>Attributes</h2>
<table><thead>
<tr>
<th>Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>int, database primary key</td>
</tr>
<tr>
<td>driverName</td>
<td></td>
</tr>
<tr>
<td>address</td>
<td></td>
</tr>
<tr>
<td>email</td>
<td></td>
</tr>
<tr>
<td>licenseNumber</td>
<td></td>
</tr>
<tr>
<td>licenseClass</td>
<td></td>
</tr>
<tr>
<td>expiryDate</td>
<td>date string, date to expire, in &quot;DD/MM/YYYY&quot; format</td>
</tr>
</tbody></table>
<h2 id='licenses_get-license'>Get License</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/licenses/1</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">token &lt;ACESS TOKEN&gt;</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/licenses/1"</span>
  -H <span class="s2">"Authorization: token &lt;ACESS TOKEN&gt;"</span>
</code></pre>
<blockquote>
<p>Returns</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"driverName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nima Nishad"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unit 1/97-99 Birriga Road, Bellevue Hill, NSW"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"licenseNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123123123Q"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"licenseClass"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Class C"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"youremail@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expiryDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10/10/2017"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get driver&#39;s license information by database id.</p>

<p>Can only be done by license&#39;s owner or officers. It means drivers cannot search information of other drivers&#39; licenses.</p>
<h2 id='licenses_update-license'>Update License</h2><pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/licenses/1</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">token &lt;ACCESS TOKEN&gt;</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"driverName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nima Nishad"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unit 1/97-99 Birriga Road, Bellevue Hill, NSW"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"licenseNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123123123Q"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"licenseClass"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Class C"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"youremail@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expiryDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10/10/2022"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s2">"/licenses/1"</span>
  -X PUT
  -H <span class="s2">"Content-Type: application/json"</span>
  -H <span class="s2">"Authorization: token &lt;ACCESS TOKEN&gt;"</span>
  -d <span class="s1">'{
        "id": 1,
        "driverName": "Nima Nishad",
        "address": "Unit 1/97-99 Birriga Road, Bellevue Hill, NSW",
        "licenseNumber": "123123123Q",
        "licenseClass": "Class C",
        "email": "youremail@email.com",
        "expiryDate": "10/10/2022"
      }'</span>
</code></pre>
<blockquote>
<p>Returns an updated license, basically should be the same as above</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"driverName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nima Nishad"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unit 1/97-99 Birriga Road, Bellevue Hill, NSW"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"licenseNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123123123Q"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"licenseClass"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Class C"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"youremail@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expiryDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10/10/2022"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Update a driver&#39;s license.</p>

<p>Drivers can update their address in the beginning of the renewal. Officers can update the expiry date.</p>
<h1 id='renewals_renewals'>Renewals</h1>
<p>Represent renewal notices for licenses that are going to expire. Renewals are generated by officers manually.</p>
<h2 id='renewals_attributes'>Attributes</h2>
<table><thead>
<tr>
<th>Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>int, database primary key</td>
</tr>
<tr>
<td>address</td>
<td>string, temporary address</td>
</tr>
<tr>
<td>email</td>
<td>string, temporary email</td>
</tr>
<tr>
<td>status</td>
<td>int, the following table shows the meaning of each int</td>
</tr>
<tr>
<td>issueDate</td>
<td>date time string, date of the notice issued, in &quot;DD/MM/YYYY hh:mm:ss&quot; format</td>
</tr>
<tr>
<td>lastModified</td>
<td>date time string, in &quot;DD/MM/YYYY hh:mm:ss&quot; format</td>
</tr>
<tr>
<td>license</td>
<td><a href="#licenses_licenses">license object</a>, not null, should only contain id and uri, referring to driver&#39;s license</td>
</tr>
<tr>
<td>payment</td>
<td><a href="#payments_payments">payment obkect</a>, not null, should only contain id and uri, referring to driver&#39;s payment</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>0</td>
<td>renewal notice is newly created by an officer</td>
</tr>
<tr>
<td>1</td>
<td>renewal needs to be reviewed by officer</td>
</tr>
<tr>
<td>2</td>
<td>renewal notice is under review</td>
</tr>
<tr>
<td>3</td>
<td>renewal has been checked by driver (or possibly has been reviewed by an officer) and has no problem, waiting for driver&#39;s payment</td>
</tr>
<tr>
<td>4</td>
<td>renewal is successful, payment and update are done</td>
</tr>
<tr>
<td>5</td>
<td>renewal is rejected, with reason</td>
</tr>
<tr>
<td>6</td>
<td>renewal notice is archived by driver, driver cannot view it again</td>
</tr>
</tbody></table>
<h2 id='renewals_get-renewals'>Get Renewals</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/renewals</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">token &lt;ACCESS TOKEN&gt;</span>
</code></pre>
<blockquote>
<p>Returns an array of renewal objects</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/renewals/1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unit 1/97-99 Birriga Road, Bellevue Hill, NSW"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"youremail@email.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"issueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27/09/2017 12:00:56"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastModified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27/09/2017 12:00:56"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"license"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/licenses/1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/payments/1"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>List all renewals, only officers can access this api.</p>
<h2 id='renewals_get-one-renewal'>Get one renewal</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/renewals/1</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">token &lt;ACCESS TOKEN&gt;</span>
</code></pre>
<blockquote>
<p>Returns</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/renewals/1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unit 1/97-99 Birriga Road, Bellevue Hill, NSW"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"youremail@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"issueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27/09/2017 12:00:56"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastModified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27/09/2017 12:00:56"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"license"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/licenses/1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/payments/1"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The license&#39;s owner can view the corresponding renewal notice.</p>
<h2 id='renewals_create-a-renewal-notice'>Create a renewal notice</h2><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/renewals</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">token &lt;ACCESS TOKEN&gt;</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"license"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Returns</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/renewals/1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unit 1/97-99 Birriga Road, Bellevue Hill, NSW"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"youremail@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"issueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27/09/2017 12:00:56"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastModified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27/09/2017 12:00:56"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"license"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/licenses/1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/payments/1"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Only officers can create a renewal notice for a expiring driver&#39;s license.</p>

<aside class="notice">
On creation, a email is sent to the driver's registered email
</aside>

<aside class="notice">
A associated payment resource is also created.
</aside>
<h3 id='renewals_paratemers'>Paratemers</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>license</td>
<td><a href="#licenses_licenses">license object</a> reference, only need to provide id, see example</td>
</tr>
</tbody></table>
<h2 id='renewals_update-a-renewal-notice'>Update a renewal notice</h2><pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/renewals/1</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">token &lt;ACCESS TOKEN&gt;</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unit 1/97-99 Birriga Road, Bellevue Hill, NSW"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"youremail222@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"license"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Returns the updated object</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/renewals/1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unit 1/97-99 Birriga Road, Bellevue Hill, NSW"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"youremail222@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"issueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27/09/2017 12:00:56"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastModified"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27/09/2017 12:00:56"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"license"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/licenses/1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/payments/1"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Can be done by license&#39;s owner or officers.</p>
<h3 id='renewals_parameters'>Parameters</h3>
<p>As <code>issueDate</code> cannot be changed and <code>lastModified</code> is updated automatically, they are not required to present in the parameters.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>should be the same in the url</td>
</tr>
<tr>
<td>address</td>
<td></td>
</tr>
<tr>
<td>email</td>
<td></td>
</tr>
<tr>
<td>status</td>
<td></td>
</tr>
<tr>
<td>license</td>
<td><a href="#licenses_licenses">license object</a> reference, only need to provide id, see example</td>
</tr>
</tbody></table>
<h2 id='renewals_archive-a-renewal-notice'>Archive a renewal notice</h2>
<p>Actually we consider it an update action instead of a delete operation.</p>

<p>Just update the status to 6, see <a href="#renewals_update-a-renewal-notice">Update a renewal notice</a> for how to update.</p>
<h1 id='payments_payments'>Payments</h1>
<aside class="notice">
Payment design is modified.
</aside>

<p>Payment is closely related to renewal notices. When a renewal notice is created, a payment resource is also created. So no explicit creation (POST) of a payment is allowed.</p>
<h2 id='payments_attributes'>Attributes</h2>
<table><thead>
<tr>
<th>Attributes</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>int, database primary key</td>
</tr>
<tr>
<td>amount</td>
<td>numeric, the amount paid</td>
</tr>
<tr>
<td>paidDate</td>
<td>date time string, date of the required fee paid, in &quot;DD/MM/YYYY hh:mm:ss&quot; format, is NULL when payment is not made</td>
</tr>
<tr>
<td>renewal</td>
<td><a href="#renewals_renewals">renewal object</a>, not null, should only contain id and uri, referring to driver&#39;s license</td>
</tr>
</tbody></table>
<h2 id='payments_get-a-payment'>Get a payment</h2><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/payments/1</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">token &lt;ACCESS TOKEN&gt;</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
</code></pre>
<blockquote>
<p>Returns</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/payments/1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paidDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"renewal"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uri"</span><span class="p">,</span><span class="w"> </span><span class="s2">"/renewals/1"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='payments_update-a-payment'>Update a payment</h2><pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/payments/1</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">token &lt;ACCESS TOKEN&gt;</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/payments/1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paidDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27/09/2017 21:00:07"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"renewal"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uri"</span><span class="p">,</span><span class="w"> </span><span class="s2">"/renewals/1"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Returns</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/payments/1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paidDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"27/09/2017 21:00:07"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"renewal"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"uri"</span><span class="p">,</span><span class="w"> </span><span class="s2">"/renewals/1"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>When a payment is actually paid by the driver. This operation will update the <code>paidDate</code> field to current time.</p>
<h1 id='officers_officers'>Officers</h1>
<aside class="warning">
Not a REST resource. See the following for details.
</aside>

<p>Officers should be managed in client application. It has nothing to do with the REST service. The only thing that the REST service distinguishes officers and drivers it the <a href="#notes_authentication">access token</a>.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="http">http</a>
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
